<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <title>Vertical Playground</title>

  <script src="../blockly_uncompressed_vertical.js"></script>
  <script src="../msg/messages.js"></script>
  <script src="../blocks_vertical/vertical_extensions.js"></script>
  <script src="../blocks_common/math.js"></script>
  <script src="../blocks_common/text.js"></script>
  <script src="../blocks_common/colour.js"></script>
  <script src="../blocks_vertical/control.js"></script>
  <script src="../blocks_vertical/event.js"></script>
  <script src="../blocks_vertical/motion.js"></script>
  <script src="../blocks_vertical/looks.js"></script>
  <script src="../blocks_vertical/procedures.js"></script>
  <script src="../blocks_vertical/operators.js"></script>
  <script src="../blocks_vertical/pen.js"></script>
  <script src="../blocks_vertical/sound.js"></script>
  <script src="../blocks_vertical/sensing.js"></script>
  <script src="../blocks_vertical/data.js"></script>
  <script src="../blocks_vertical/extensions.js"></script>
  <script src="../blocks_vertical/default_toolbox.js"></script>
  <script src="../blocks_vertical/vtex.js"></script>

  <script>
    'use strict';

    var workspace = null;

    function start() {
      var soundsEnabled = null;
      if (sessionStorage) {
        // Restore sounds state.
        soundsEnabled = sessionStorage.getItem('soundsEnabled');
        if (soundsEnabled === null) {
          soundsEnabled = true;
        } else {
          soundsEnabled = (soundsEnabled === 'true');
        }
      } else {
        soundsEnabled = true;
      }
      setSoundsEnabled(soundsEnabled);

      // Setup blocks
      // Parse the URL arguments.
      var match = location.search.match(/dir=([^&]+)/);
      var rtl = match && match[1] == 'rtl';
      document.forms.options.elements.dir.selectedIndex = Number(rtl);
      var toolbox = getToolboxElement();
      document.forms.options.elements.toolbox.selectedIndex =
        toolbox ? 1 : 0;

      match = location.search.match(/side=([^&]+)/);

      var side = match ? match[1] : 'start';

      document.forms.options.elements.side.value = side;

      // Create main workspace.
      workspace = Blockly.inject('blocklyDiv', {
        comments: false,
        disable: false,
        collapse: false,
        media: '../media/',
        readOnly: false,
        rtl: rtl,
        scrollbars: true,
        trashcan: true,
        toolbox: toolbox,
        toolboxPosition: side == 'top' || side == 'start' ? 'start' : 'end',
        horizontalLayout: side == 'top' || side == 'bottom',
        sounds: soundsEnabled,
        zoom: {
          controls: true,
          wheel: true,
          startScale: 0.75,
          maxScale: 4,
          minScale: 0.25,
          scaleSpeed: 1.1
        },
        colours: {
          fieldShadow: 'rgba(255, 255, 255, 0.3)',
          dragShadowOpacity: 0.6
        }
      });

      if (sessionStorage) {
        // Restore previously displayed text.
        var text = sessionStorage.getItem('textarea');
        if (text) {
          document.getElementById('importExport').value = text;
        }
        taChange();
      }

      if (sessionStorage) {
        // Restore event logging state.
        var state = sessionStorage.getItem('logEvents');
        logEvents(Boolean(state));

        // Restore flyout event logging state.
        state = sessionStorage.getItem('logFlyoutEvents');
        logFlyoutEvents(Boolean(state));
      }
    }

    function getToolboxElement() {
      var match = location.search.match(/toolbox=([^&]+)/);
      return document.getElementById('toolbox-simple');
    }

    function toXml() {
      var output = document.getElementById('importExport');
      var xml = Blockly.Xml.workspaceToDom(workspace);
      output.value = Blockly.Xml.domToPrettyText(xml);
      output.focus();
      output.select();
      taChange();
    }

    function fromXml() {
      var input = document.getElementById('importExport');
      var xml = Blockly.Xml.textToDom(input.value);
      Blockly.Xml.domToWorkspace(xml, workspace);
      taChange();
    }

    function toCode(lang) {

      console.log(lang)
      var output = document.getElementById('importExport');
      console.dir(Blockly);
      output.value = Blockly[lang].workspaceToCode(workspace);
      taChange();
    }

    // Disable the "Import from XML" button if the XML is invalid.
    // Preserve text between page reloads.
    function taChange() {
      var textarea = document.getElementById('importExport');
      if (sessionStorage) {
        sessionStorage.setItem('textarea', textarea.value)
      }
      var valid = true;
      try {
        Blockly.Xml.textToDom(textarea.value);
      } catch (e) {
        valid = false;
      }
      document.getElementById('import').disabled = !valid;
    }

    function logEvents(state) {
      var checkbox = document.getElementById('logCheck');
      checkbox.checked = state;
      if (sessionStorage) {
        sessionStorage.setItem('logEvents', state ? 'checked' : '');
      }
      if (state) {
        workspace.addChangeListener(logger);
      } else {
        workspace.removeChangeListener(logger);
      }
    }

    function logFlyoutEvents(state) {
      var checkbox = document.getElementById('logFlyoutCheck');
      checkbox.checked = state;
      var soundsEnabled = null;
      if (sessionStorage) {
        sessionStorage.setItem('logFlyoutEvents', state ? 'checked' : '');
      }
      var flyoutWorkspace = (workspace.flyout_) ? workspace.flyout_.workspace_ :
        workspace.toolbox_.flyout_.workspace_;
      if (state) {
        flyoutWorkspace.addChangeListener(logger);
      } else {
        flyoutWorkspace.removeChangeListener(logger);
      }
    }

    function logger(e) {
      console.log(e);
    }

    function glowBlock() {
      if (Blockly.selected) {
        workspace.glowBlock(Blockly.selected.id, true);
      }
    }

    function unglowBlock() {
      if (Blockly.selected) {
        workspace.glowBlock(Blockly.selected.id, false);
      }
    }

    function glowStack() {
      if (Blockly.selected) {
        workspace.glowStack(Blockly.selected.id, true);
      }
    }

    function unglowStack() {
      if (Blockly.selected) {
        workspace.glowStack(Blockly.selected.id, false);
      }
    }

    function sprinkles(n) {
      var prototypes = [];
      var toolbox = workspace.options.languageTree;
      if (!toolbox) {
        console.error('Toolbox not found; add a toolbox element to the DOM.');
        return;
      }
      var blocks = toolbox.getElementsByTagName('block');
      for (var i = 0; i < n; i++) {
        var blockXML = blocks[Math.floor(Math.random() * blocks.length)];
        var block = Blockly.Xml.domToBlock(blockXML, workspace);
        block.initSvg();
        block.moveBy(
          Math.round(Math.random() * 450 + 40),
          Math.round(Math.random() * 600 + 40)
        );
      }
    }

    var equalsXml = [
      '  <shadow type="operator_equals">',
      '    <value name="OPERAND1">',
      '     <shadow type="text">',
      '      <field name="TEXT">foo</field>',
      '     </shadow>',
      '    </value>',
      '    <value name="OPERAND2">',
      '      <shadow type="operator_equals"></shadow>',
      '    </value>',
      '  </shadow>'
    ].join('\n');

    var spaghettiXml = [
      '  <block type="control_if_else">',
      '    <value name="CONDITION">',
      '      <shadow type="operator_equals"></shadow>',
      '    </value>',
      '    <statement name="SUBSTACK"></statement>',
      '    <statement name="SUBSTACK2"></statement>',
      '    <next></next>',
      '  </block>'
    ].join('\n');

    function spaghetti(n) {
      console.log("Starting spaghetti.  This may take some time...");
      var xml = spaghettiXml;
      // Nest if/else statements deeply.
      for (var i = 0; i < 2 * n; i++) {
        xml = xml.replace(/(<statement name="SUBSTACK2?"?>)<\//g,
          '$1' + spaghettiXml + '</');
      }
      // Stack a bit.
      for (var i = 0; i < n; i++) {
        xml = xml.replace(/(<next>)<\//g,
          '$1' + spaghettiXml + '</');
      }

      // Nest boolean comparisons.
      var equalsBlock = equalsXml;
      for (var i = 0; i < n; i++) {
        equalsBlock = equalsBlock.replace(
          /(<shadow( type="operator_equals")?>)<\/shadow>/g, equalsXml);
      }

      // Put the nested boolean comparisons into if/else statements.
      xml = xml.replace(/(<shadow( type="operator_equals")?>)<\/shadow>/g,
        equalsBlock);

      xml = '<xml xmlns="http://www.w3.org/1999/xhtml">' + xml + '</xml>';
      var dom = Blockly.Xml.textToDom(xml);
      console.time('Spaghetti domToWorkspace');
      Blockly.Xml.domToWorkspace(dom, workspace);
      console.timeEnd('Spaghetti domToWorkspace');
    }

    function setSoundsEnabled(state) {
      var checkbox = document.getElementById('soundsEnabled');
      checkbox.checked = (state) ? 'checked' : '';
      if (sessionStorage) {
        sessionStorage.setItem('soundsEnabled', state);
      }
    }

    function reportDemo() {
      if (Blockly.selected) {
        workspace.reportValue(
          Blockly.selected.id,
          document.getElementById('reportValue').value
        );
      }
    }
  </script>

  <style>
    html,
    body {
      height: 100%;
    }

    body {
      background-color: #fff;
      font-family: sans-serif;
      overflow: hidden;
    }

    h1 {
      font-weight: normal;
      font-size: 140%;
    }

    #blocklyDiv {
      float: right;
      height: 95%;
      width: 70%;
    }

    #collaborators {
      float: right;
      width: 30px;
      margin-left: 10px;
    }

    #collaborators>img {
      margin-right: 5px;
      height: 30px;
      padding-bottom: 5px;
      width: 30px;
      border-radius: 3px;
    }

    #importExport {
      font-family: monospace;
    }
  </style>
</head>

<body onload="start()">
  <div id="collaborators"></div>
  <div id="blocklyDiv"></div>
  <!-- Simple toolbox -->
  <xml id="toolbox-simple" style="display: none">
    <category name="Events" colour="210" secondaryColour="0">
      <block type="vtex_when_evaluate_teaser"></block>
      <block type="vtex_control_return_true"></block>
      <block type="vtex_control_return_false"></block>
      <block type="vtex_control_done"></block>
    </category>
    <sep></sep>

    <!-- <block type="control_repeat"></block> -->
    <category name="Groups" secondaryColour="0">
      <block type="vtex_control_group"></block>
      <block type="vtex_control_if_else"></block>
    </category>

    <category name="Payment" secondaryColour="0">
      <block type="vtex_payment_bin">
        <value name="BIN">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
      </block>
      <block type="vtex_payment_bin_range">
        <value name="BIN_LOWER_BOUND">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
        <value name="BIN_UPPER_BOUND">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
      </block>
      <block type="vtex_payment_method"></block>
      <block type="vtex_payment_installments">
        <value name="BIN_LOWER_BOUND">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
        <value name="BIN_UPPER_BOUND" >
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
      </block>
    </category>

    <category name="Operators" secondaryColour="0">
      <block type="vtex_operator_and"></block>
      <block type="vtex_operator_or"></block>
      <block type="vtex_operator_not"></block>
    </category>

    <!-- <block type="control_repeat"></block> -->
    <category name="Pants" secondaryColour="0">
      <block type="control_forever"></block>
      <block type="control_repeat">
        <value name="TIMES">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
    </category>

    <category name="Events" secondaryColour="0">
      <block type="event_whenflagclicked"></block>
      <block type="event_whenbroadcastreceived">
        <value name="CHOICE">
          <shadow type="dropdown_whenbroadcast">
            <field name="CHOICE">blue</field>
          </shadow>
        </value>
      </block>
      <block type="event_broadcast">
        <value name="CHOICE">
          <shadow type="dropdown_broadcast">
            <field name="CHOICE">blue</field>
          </shadow>
        </value>
      </block>
    </category>

    <category name="Looks" colour="#9966FF" secondaryColour="#774DCB">
      <block type="looks_show" id="looks_show"></block>
      <block type="looks_hide" id="looks_hide"></block>
      <block type="looks_switchcostumeto" id="looks_switchcostumeto">
        <value name="COSTUME">
          <shadow type="looks_costume"></shadow>
        </value>
      </block>
      <block type="looks_nextcostume" id="looks_nextcostume"></block>
      <block type="looks_nextbackdrop" id="looks_nextbackdrop"></block>
      <block type="looks_switchbackdropto" id="looks_switchbackdropto">
        <value name="BACKDROP">
          <shadow type="looks_backdrops"></shadow>
        </value>
      </block>
      <block type="looks_switchbackdroptoandwait" id="looks_switchbackdroptoandwait">
        <value name="BACKDROP">
          <shadow type="looks_backdrops"></shadow>
        </value>
      </block>
      <block type="looks_changeeffectby" id="looks_changeeffectby">
        <value name="CHANGE">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="looks_seteffectto" id="looks_seteffectto">
        <value name="VALUE">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="looks_cleargraphiceffects" id="looks_cleargraphiceffects"></block>
      <block type="looks_changesizeby" id="looks_changesizeby">
        <value name="CHANGE">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="looks_setsizeto" id="looks_setsizeto">
        <value name="SIZE">
          <shadow type="math_number">
            <field name="NUM">100</field>
          </shadow>
        </value>
      </block>
      <block type="looks_gotofrontback" id="looks_gotofrontback"></block>
      <block type="looks_goforwardbackwardlayers" id="looks_goforwardbackwardlayers">
        <value name="NUM">
          <shadow type="math_integer">
            <field name="NUM">1</field>
          </shadow>
        </value>
      </block>
      <block type="looks_costumenumbername" id="looks_costumenumbername"></block>
      <block type="looks_backdropnumbername" id="looks_backdropnumbername"></block>
      <block type="looks_size" id="looks_size"></block>
    </category>
    <category name="Sound" colour="#D65CD6" secondaryColour="#BD42BD">
      <block type="sound_play" id="sound_play">
        <value name="SOUND_MENU">
          <shadow type="sound_sounds_menu"></shadow>
        </value>
      </block>
      <block type="sound_playuntildone" id="sound_playuntildone">
        <value name="SOUND_MENU">
          <shadow type="sound_sounds_menu"></shadow>
        </value>
      </block>
      <block type="sound_stopallsounds" id="sound_stopallsounds"></block>
      <block type="sound_playdrumforbeats" id="sound_playdrumforbeats">
        <value name="DRUM">
          <shadow type="sound_drums_menu"></shadow>
        </value>
        <value name="BEATS">
          <shadow type="math_number">
            <field name="NUM">0.25</field>
          </shadow>
        </value>
      </block>
      <block type="sound_restforbeats" id="sound_restforbeats">
        <value name="BEATS">
          <shadow type="math_number">
            <field name="NUM">0.25</field>
          </shadow>
        </value>
      </block>
      <block type="sound_playnoteforbeats" id="sound_playnoteforbeats">
        <value name="NOTE">
          <shadow type="math_number">
            <field name="NUM">60</field>
          </shadow>
        </value>
        <value name="BEATS">
          <shadow type="math_number">
            <field name="NUM">0.5</field>
          </shadow>
        </value>
      </block>
      <block type="sound_setinstrumentto" id="sound_setinstrumentto">
        <value name="INSTRUMENT">
          <shadow type="sound_instruments_menu"></shadow>
        </value>
      </block>
      <block type="sound_changeeffectby" id="sound_changeeffectby">
        <value name="VALUE">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="sound_seteffectto" id="sound_seteffectto">
        <value name="VALUE">
          <shadow type="math_number">
            <field name="NUM">100</field>
          </shadow>
        </value>
      </block>
      <block type="sound_cleareffects" id="sound_cleareffects"></block>
      <block type="sound_changevolumeby" id="sound_changevolumeby">
        <value name="VOLUME">
          <shadow type="math_number">
            <field name="NUM">-10</field>
          </shadow>
        </value>
      </block>
      <block type="sound_setvolumeto" id="sound_setvolumeto">
        <value name="VOLUME">
          <shadow type="math_number">
            <field name="NUM">100</field>
          </shadow>
        </value>
      </block>
      <block type="sound_volume" id="sound_volume"></block>
      <block type="sound_changetempoby" id="sound_changetempoby">
        <value name="TEMPO">
          <shadow type="math_number">
            <field name="NUM">20</field>
          </shadow>
        </value>
      </block>
      <block type="sound_settempotobpm" id="sound_settempotobpm">
        <value name="TEMPO">
          <shadow type="math_number">
            <field name="NUM">60</field>
          </shadow>
        </value>
      </block>
      <block type="sound_tempo" id="sound_tempo"></block>
    </category>
    <category name="Events" colour="#FFD500" secondaryColour="#CC9900">
      <block type="event_whenflagclicked" id="event_whenflagclicked"></block>
      <block type="event_whenkeypressed" id="event_whenkeypressed">
      </block>
      <block type="event_whenthisspriteclicked" id="event_whenthisspriteclicked"></block>
      <block type="event_whenbackdropswitchesto" id="event_whenbackdropswitchesto">
      </block>
      <block type="event_whengreaterthan" id="event_whengreaterthan">
        <value name="VALUE">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="event_whenbroadcastreceived" id="event_whenbroadcastreceived">
      </block>
      <block type="event_broadcast" id="event_broadcast">
        <value name="BROADCAST_INPUT">
          <shadow type="event_broadcast_menu"></shadow>
        </value>
      </block>
      <block type="event_broadcastandwait" id="event_broadcastandwait">
        <value name="BROADCAST_INPUT">
          <shadow type="event_broadcast_menu"></shadow>
        </value>
      </block>
    </category>
    <category name="Control" colour="#FFAB19" secondaryColour="#CF8B17">
      <block type="control_wait" id="control_wait">
        <value name="DURATION">
          <shadow type="math_positive_number">
            <field name="NUM">1</field>
          </shadow>
        </value>
      </block>
      <block type="control_repeat" id="control_repeat">
        <value name="TIMES">
          <shadow type="math_whole_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="control_forever" id="control_forever"></block>
      <block type="control_if" id="control_if"></block>
      <block type="control_if_else" id="control_if_else"></block>
      <block type="control_wait_until" id="control_wait_until"></block>
      <block type="control_repeat_until" id="control_repeat_until"></block>
      <block type="control_stop" id="control_stop"></block>
      <block type="control_start_as_clone" id="control_start_as_clone"></block>
      <block type="control_create_clone_of" id="control_create_clone_of">
        <value name="CLONE_OPTION">
          <shadow type="control_create_clone_of_menu"></shadow>
        </value>
      </block>
      <block type="control_delete_this_clone" id="control_delete_this_clone"></block>
    </category>
    <category name="Sensing" colour="#4CBFE6" secondaryColour="#2E8EB8">
      <block type="sensing_touchingobject" id="sensing_touchingobject">
        <value name="TOUCHINGOBJECTMENU">
          <shadow type="sensing_touchingobjectmenu"></shadow>
        </value>
      </block>
      <block type="sensing_touchingcolor" id="sensing_touchingcolor">
        <value name="COLOR">
          <shadow type="colour_picker"></shadow>
        </value>
      </block>
      <block type="sensing_coloristouchingcolor" id="sensing_coloristouchingcolor">
        <value name="COLOR">
          <shadow type="colour_picker"></shadow>
        </value>
        <value name="COLOR2">
          <shadow type="colour_picker"></shadow>
        </value>
      </block>
      <block type="sensing_distanceto" id="sensing_distanceto">
        <value name="DISTANCETOMENU">
          <shadow type="sensing_distancetomenu"></shadow>
        </value>
      </block>
      <block type="sensing_keypressed" id="sensing_keypressed"></block>
      <block type="sensing_mousedown" id="sensing_mousedown"></block>
      <block type="sensing_mousex" id="sensing_mousex"></block>
      <block type="sensing_mousey" id="sensing_mousey"></block>
      <block type="sensing_setdragmode" id="sensing_setdragmode"></block>
      <block type="sensing_loudness" id="sensing_loudness"></block>
      <block type="sensing_timer" id="sensing_timer"></block>
      <block type="sensing_resettimer" id="sensing_resettimer"></block>
      <block type="sensing_of" id="sensing_of">
        <value name="OBJECT">
          <shadow type="sensing_of_object_menu"></shadow>
        </value>
      </block>
      <block type="sensing_current" id="sensing_current"></block>
      <block type="sensing_dayssince2000" id="sensing_dayssince2000"></block>
    </category>
    <category name="Pen" colour="#00B295" secondaryColour="#0B8E69">
      <block type="pen_clear" id="pen_clear"></block>
      <block type="pen_stamp" id="pen_stamp"></block>
      <block type="pen_pendown" id="pen_pendown"></block>
      <block type="pen_penup" id="pen_penup"></block>
      <block type="pen_setpencolortocolor" id="pen_setpencolortocolor">
        <value name="COLOR">
          <shadow type="colour_picker">
          </shadow>
        </value>
      </block>
      <block type="pen_changepencolorby" id="pen_changepencolorby">
        <value name="COLOR">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="pen_setpencolortonum" id="pen_setpencolortonum">
        <value name="COLOR">
          <shadow type="math_number">
            <field name="NUM">0</field>
          </shadow>
        </value>
      </block>
      <block type="pen_changepenshadeby" id="pen_changepenshadeby">
        <value name="SHADE">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="pen_setpenshadeto" id="pen_setpenshadeto">
        <value name="SHADE">
          <shadow type="math_number">
            <field name="NUM">50</field>
          </shadow>
        </value>
      </block>
      <block type="pen_changepensizeby" id="pen_changepensizeby">
        <value name="SIZE">
          <shadow type="math_number">
            <field name="NUM">1</field>
          </shadow>
        </value>
      </block>
      <block type="pen_setpensizeto" id="pen_setpensizeto">
        <value name="SIZE">
          <shadow type="math_number">
            <field name="NUM">1</field>
          </shadow>
        </value>
      </block>
      <block type="pen_changepentransparencyby" id="pen_changepentransparencyby">
        <value name="TRANSPARENCY">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="pen_setpentransparencyto" id="pen_setpentransparencyto">
        <value name="TRANSPARENCY">
          <shadow type="math_number">
            <field name="NUM">50</field>
          </shadow>
        </value>
      </block>
    </category>
    <category name="Operators" colour="#40BF4A" secondaryColour="#389438">
      <block type="operator_add" id="operator_add">
        <value name="NUM1">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
        <value name="NUM2">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
      </block>
      <block type="operator_subtract" id="operator_subtract">
        <value name="NUM1">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
        <value name="NUM2">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
      </block>
      <block type="operator_multiply" id="operator_multiply">
        <value name="NUM1">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
        <value name="NUM2">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
      </block>
      <block type="operator_divide" id="operator_divide">
        <value name="NUM1">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
        <value name="NUM2">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
      </block>
      <block type="operator_random" id="operator_random">
        <value name="FROM">
          <shadow type="math_number">
            <field name="NUM">1</field>
          </shadow>
        </value>
        <value name="TO">
          <shadow type="math_number">
            <field name="NUM">10</field>
          </shadow>
        </value>
      </block>
      <block type="operator_lt" id="operator_lt">
        <value name="OPERAND1">
          <shadow type="text">
            <field name="TEXT"></field>
          </shadow>
        </value>
        <value name="OPERAND2">
          <shadow type="text">
            <field name="TEXT"></field>
          </shadow>
        </value>
      </block>
      <block type="operator_equals" id="operator_equals">
        <value name="OPERAND1">
          <shadow type="text">
            <field name="TEXT"></field>
          </shadow>
        </value>
        <value name="OPERAND2">
          <shadow type="text">
            <field name="TEXT"></field>
          </shadow>
        </value>
      </block>
      <block type="operator_gt" id="operator_gt">
        <value name="OPERAND1">
          <shadow type="text">
            <field name="TEXT"></field>
          </shadow>
        </value>
        <value name="OPERAND2">
          <shadow type="text">
            <field name="TEXT"></field>
          </shadow>
        </value>
      </block>
      <block type="operator_and" id="operator_and"></block>
      <block type="operator_or" id="operator_or"></block>
      <block type="operator_not" id="operator_not"></block>
      <block type="operator_join" id="operator_join">
        <value name="STRING1">
          <shadow type="text">
            <field name="TEXT">hello</field>
          </shadow>
        </value>
        <value name="STRING2">
          <shadow type="text">
            <field name="TEXT">world</field>
          </shadow>
        </value>
      </block>
      <block type="operator_letter_of" id="operator_letter_of">
        <value name="LETTER">
          <shadow type="math_whole_number">
            <field name="NUM">1</field>
          </shadow>
        </value>
        <value name="STRING">
          <shadow type="text">
            <field name="TEXT">world</field>
          </shadow>
        </value>
      </block>
      <block type="operator_length" id="operator_length">
        <value name="STRING">
          <shadow type="text">
            <field name="TEXT">world</field>
          </shadow>
        </value>
      </block>
      <block type="operator_contains" id="operator_contains">
        <value name="STRING1">
          <shadow type="text">
            <field name="TEXT">hello</field>
          </shadow>
        </value>
        <value name="STRING2">
          <shadow type="text">
            <field name="TEXT">world</field>
          </shadow>
        </value>
      </block>
      <block type="operator_mod" id="operator_mod">
        <value name="NUM1">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
        <value name="NUM2">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
      </block>
      <block type="operator_round" id="operator_round">
        <value name="NUM">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
      </block>
      <block type="operator_mathop" id="operator_mathop">
        <value name="NUM">
          <shadow type="math_number">
            <field name="NUM"></field>
          </shadow>
        </value>
      </block>
    </category>
    <category name="Data" colour="#FF8C1A" secondaryColour="#DB6E00" custom="VARIABLE">
    </category>
    <category name="More" colour="#FF6680" secondaryColour="#FF4D6A" custom="PROCEDURE">
    </category>
    <category name="Extensions" colour="#FF6680" secondaryColour="#FF4D6A" iconURI="../media/extensions/wedo2-block-icon.svg">
      <block type="extension_pen_down" id="extension_pen_down"></block>
      <block type="extension_music_drum" id="extension_music_drum">
        <value name="NUMBER">
          <shadow type="math_number">
            <field name="NUM">1</field>
          </shadow>
        </value>
      </block>
      <block type="extension_wedo_motor" id="extension_wedo_motor"></block>
      <block type="extension_wedo_hat" id="extension_wedo_hat"></block>
      <block type="extension_wedo_boolean" id="extension_wedo_boolean"></block>
      <block type="extension_wedo_tilt_reporter" id="extension_wedo_reporter">
        <value name="TILT">
          <shadow type="extension_wedo_tilt_menu"></shadow>
        </value>
      </block>
      <block type="extension_music_reporter" id="extension_music_reporter"></block>
    </category>
  </xml>

  <!-- Sidebar -->
  <h1>Vertical Blocks</h1>
  <p>
    <a href="javascript:void(workspace.setVisible(true))">Show</a>
    -
    <a href="javascript:void(workspace.setVisible(false))">Hide</a>
  </p>

  <form id="options">
    <select name="dir" onchange="document.forms.options.submit()">
      <option value="ltr">LTR</option>
      <option value="rtl">RTL</option>
    </select>
    <select name="toolbox" onchange="document.forms.options.submit()">
      <option value="categories">Categories</option>
      <option value="simple">Simple</option>
    </select>
    <select name="side" onchange="document.forms.options.submit()">
      <option value="start">Start</option>
      <option value="end">End</option>
      <option value="top">Top</option>
      <option value="bottom">Bottom</option>
    </select>
  </form>

  <p>
    <input type="button" value="Export to XML" onclick="toXml()"> &nbsp;
    <input type="button" value="Import from XML" onclick="fromXml()" id="import">
    <br>
    <input type="button" value="To JavaScript" onclick="toCode('JavaScript')">
    <br>
    <textarea id="importExport" style="width: 26%; height: 12em" onchange="taChange();" onkeyup="taChange()"></textarea>
  </p>

  <hr>

  <p>
    Log events: &nbsp;
    <input type="checkbox" onclick="logEvents(this.checked)" id="logCheck">
  </p>

  <p>
    Stress test: &nbsp;
    <input type="button" value="Sprinkles!" onclick="sprinkles(100)">
    <input type="button" value="Spaghetti!" onclick="spaghetti(3)">
  </p>

  <p>
    Glows: &nbsp;
    <input type="button" value="Glow last clicked block" onclick="glowBlock()" />
    <input type="button" value="Unglow last clicked block" onclick="unglowBlock()" />
    <input type="button" value="Stack glow last clicked block" onclick="glowStack()" />
    <input type="button" value="Stack unglow last clicked block" onclick="unglowStack()" />
  </p>

  <p>
    Log flyout events: &nbsp;
    <input type="checkbox" onclick="logFlyoutEvents(this.checked)" id="logFlyoutCheck">
  </p>

  <p>
    Enable sounds (after refresh): &nbsp;
    <input type="checkbox" onclick="setSoundsEnabled(this.checked)" id="soundsEnabled">
  </p>

  <p>
    <input type="button" value="Undo" onclick="workspace.undo()" />
    <input type="button" value="Redo" onclick="workspace.undo(true)" />
  </p>

  <p>
    Report:
    <input id="reportValue" type="text" value="123" />
    <input type="button" value="Report last clicked block" onclick="reportDemo()" />
  </p>
</body>

</html>